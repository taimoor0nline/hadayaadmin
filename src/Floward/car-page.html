<section class="page-cart">
    <div class="content-pages">
      <div class="container container-v1">
        <div class="row">
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <div id="divLeft">
                  {% if cart.item_count > 0 %}
                    <div class="row">
                      <div class="col-md-12 mx-0">
                        <form id="msform">
                          <!-- progressbar -->
                          <ul id="progressbar">
                            <li class="active" id="customize"><strong>Customize</strong></li>
                            <li id="personal"><strong>Delivery Details</strong></li>
                          </ul>
                          <!-- fieldsets -->
                          <fieldset>
                            <div class="form-card">
                              <div class="row">
                                <div class="col-md-11">
                                  <h4>Gift Card & Message</h4>
                                </div>
                                <div class="col-md-1">
                                  <i class="fa-solid fa-gears"></i>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-6 text-center">
                                  <div class="message-card" onclick="showProductModal()">
                                    <img src="https://picsum.photos/200/300/?blur=2" alt="Icon">
                                    <p class="mt-2">hello</p>
                                    <div class="mt-2">
                                      <button type="button" class="btn btn-link">
                                        <i class="fas fa-link"></i>
                                      </button>
                                      <span class="text-success">Message Added</span>
                                      <i class="fas fa-check-circle text-success"></i>
                                    </div>
                                  </div>
                                </div>
  
                                <div class="col-md-6 text-center">
                                  <div class="card">
                                    <img
                                      class="card-img-top card-img"
                                      src="https://picsum.photos/200/300/?blur=2"
                                      alt="Card image"
                                    >
                                    <div class="card-body">
                                      <h5 class="card-title">You Complete Me</h5>
                                      <p class="card-text">OMR 1.00</p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <input
                              type="button"
                              name="next"
                              class="next action-button"
                              value="Next Step"
                              id="customizeNextStep"
                            >
                          </fieldset>
                          <fieldset>
                            <div class="form-card">
                              <div class="form-group">
                                <label>Recipient name *</label>
                                <input
                                  type="text"
                                  class="form-control"
                                  name="recipient_name"
                                  placeholder="Recipient name"
                                >
                              </div>
                              <div class="form-group">
                                <label>Recipient phone *</label>
                                <div class="input-group">
                                  <div class="input-group-prepend">
                                    <select class="custom-select" name="phone_code">
                                      <option value="968">Oman (+968)</option>
                                      <!-- Add other country codes as needed -->
                                    </select>
                                  </div>
                                  <input
                                    type="text"
                                    class="form-control"
                                    name="recipient_phone"
                                    placeholder="Recipient phone"
                                  >
                                </div>
                              </div>
                              <div class="form-group">
                                <div class="custom-control custom-switch">
                                  <input type="checkbox" class="custom-control-input" id="askAddress" name="ask_address">
                                  <label class="custom-control-label" for="askAddress"
                                    >Ask the recipient for the address</label
                                  >
                                </div>
                                <small class="form-text text-muted">
                                  We will collect the address from the recipient. Delivery time may be impacted if the
                                  recipient is unreachable.
                                </small>
                              </div>
                              <div class="form-group" id="addressInfo" style="display:none;">
                                <div class="alert alert-warning" role="alert">
                                  We will collect the address from the recipient. Delivery time may be impacted if the
                                  recipient is unreachable.
                                </div>
                              </div>
                              <div class="form-group" id="recipientAddress" style="display:none;">
                                <label>Recipient Address *</label>
                                <input
                                  type="text"
                                  class="form-control"
                                  name="recipient_address"
                                  placeholder="Recipient Address"
                                >
                              </div>
                              <div class="form-group">
                                <div class="custom-control custom-checkbox">
                                  <input
                                    type="checkbox"
                                    class="custom-control-input"
                                    id="keepIdentitySecret"
                                    name="keep_identity_secret"
                                  >
                                  <label class="custom-control-label" for="keepIdentitySecret"
                                    >Keep my identity secret</label
                                  >
                                </div>
                              </div>
                              <div class="form-group">
                                <label>Delivery time</label>
                                <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                  <label class="btn btn-outline-primary">
                                    <input type="radio" name="delivery_time" value="fastest" autocomplete="off"> Fastest
                                    Delivery
                                  </label>
                                  <label class="btn btn-outline-primary" data-toggle="modal" data-target="#deliveryModal">
                                    <input type="radio" name="delivery_time" value="anotherTime" autocomplete="off">
                                    Another time
                                  </label>
                                </div>
                              </div>
                            </div>
                            <input type="button" name="previous" class="previous action-button-previous" value="Previous">
                            <input
                              type="button"
                              name="next"
                              class="next action-button"
                              value="Proceed to Payment"
                              id="deliveryNextStep"
                              onclick="saveDeliveryDetailsAndRedirect()"
                            >
                          </fieldset>
                        </form>
                      </div>
                    </div>
                  {% else %}
                    <p>{{ 'cart.general.empty' | t }}</p>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <div id="divRight" class="content-about content-cart-page">
                  {% if cart.item_count > 0 %}
                    <form action="/cart" method="post" novalidate>
                      <div class="table-responsive">
                        <table class="shop_table table--responsive cart table">
                          <thead>
                            <tr class="cart-title">
                              <th colspan="2" class="product-thumbnail">{{ 'cart.label.product' | t }}</th>
                              <th class="product-price">{{ 'cart.label.price' | t }}</th>
                              <th class="product-quantity">{{ 'cart.label.quantity' | t }}</th>
                              <th class="product-subtotal">{{ 'cart.label.total' | t }}</th>
                              <th class="product-remove">&nbsp;</th>
                            </tr>
                          </thead>
                          {% if cart.item_count > 0 %}
                            <tbody>
                              {% for item in cart.items %}
                                <tr class="cart_item">
                                  <td data-label="Product Name" class="product-thumbnail">
                                    <a href="{{ item.url }}">
                                      <img src="{{ item | img_url: 'small' }}" alt="{{ item.title | escape }}">
                                    </a>
                                  </td>
                                  <td class="product-name-thumb" data-title="Product">
                                    <a href="{{ item.url }}">{{ item.product.title }}</a>
                                    {% unless item.variant.title contains 'Default' %}
                                      <small style="display: block; color: #959595;">{{ item.variant.title }}</small>
                                    {% endunless %}
                                    {% if settings.cart_vendor_enable %}
                                      <p>{{ item.vendor }}</p>
                                    {% endif %}
                                  </td>
                                  <td data-label="Product Price" class="product-price" data-title="Price">
                                    <span class="amount">{{ item.price | money_without_trailing_zeros }}</span>
                                  </td>
                                  <td data-label="Quantity" class="product-quantity" data-title="Quantity">
                                    <input
                                      type="number"
                                      name="updates[]"
                                      id="updates_{{ item.id }}"
                                      value="{{ item.quantity }}"
                                      min="0"
                                    >
                                  </td>
                                  <td data-label="Sub Total" class="product-subtotal" data-title="Total">
                                    <span class="amount">{{ item.line_price | money_without_trailing_zeros }}</span>
                                  </td>
                                  <td class="product-remove">
                                    <a
                                      class="remove set-12-svg"
                                      href="/cart/change?line={{ forloop.index }}&amp;quantity=0"
                                    >
                                      <svg
                                        xmlns="http://www.w3.org/1999/xlink"
                                        version="1.1"
                                        id="Capa_1"
                                        x="0px"
                                        y="0px"
                                        viewBox="0 0 298.667 298.667"
                                        style="enable-background:new 0 0 298.667 298.667;"
                                        xml:space="preserve"
                                      >
                                        <g>
                                          <g>
                                            <polygon points="298.667,30.187 268.48,0 149.333,119.147 30.187,0 0,30.187 119.147,149.333 0,268.48 30.187,298.667 149.333,179.52 268.48,298.667 298.667,268.48 179.52,149.333"></polygon>
                                          </g>
                                        </g>
                                      </svg>
                                    </a>
                                  </td>
                                </tr>
                              {% endfor %}
                            </tbody>
                          {% endif %}
                        </table>
                      </div>
  
                      <div class="cart_totals">
                        <div class="cart-check">
                          <h2 class="cart-title">{{ 'cart.label.cart_total' | t }}</h2>
                          <table class="total-checkout">
                            <tbody>
                              <tr>
                                <th class="cart-label">
                                  <span>{{ 'cart.label.total' | t }}</span>
                                </th>
                                <td class="cart-amount">
                                  <span
                                    ><strong
                                      ><span class="amount">
                                        {{- cart.total_price | money_without_trailing_zeros -}}
                                      </span></strong
                                    ></span
                                  >
                                </td>
                              </tr>
                            </tbody>
                          </table>
                          <div class="wc-proceed-to-checkout clearfix">
                            <button
                              type="button"
                              class="next action-button button alt wc-forward bg-color"
                              onclick="showDeliveryDetails()"
                            >
                              Continue to Delivery
                            </button>
                          </div>
                        </div>
                      </div>
                    </form>
                  {% else %}
                    <p>{{ 'cart.general.empty' | t }}</p>
                    <p>{{ 'cart.general.continue_browsing_html' | t }}</p>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Content Pages -->
  </section>
  
  <!-- Modal HTML -->
  <div
    class="modal fade"
    id="productModal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="productModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="productModalLabel">Select a Product</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="container">
            <div class="row">
              {% assign products = collections.cards.products %}
              {% if products.size > 0 %}
                {% for product in products %}
                  {% for variant in product.variants %}
                    <div class="col-md-4">
                      <div class="product-card">
                        <input type="radio" name="selectedProduct" id="product-{{ variant.id }}" value="{{ variant.id }}">
                        <label for="product-{{ variant.id }}">
                          <img src="{{ product.featured_image | img_url: 'medium' }}" alt="{{ product.title }}">
                          <h2>{{ product.title }} - {{ variant.title }}</h2>
                          <p>{{ variant.price | money_without_trailing_zeros }}</p>
                        </label>
                      </div>
                    </div>
                  {% endfor %}
                {% endfor %}
              {% else %}
                <p>No products found in this collection.</p>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="chooseProduct">Choose</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Delivery Time Modal -->
  <div
    class="modal fade"
    id="deliveryModal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="deliveryModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg" role="document">
      <!-- Make modal larger -->
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deliveryModalLabel">Another time</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="container">
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Select a delivery date *</label>
                  <div class="btn-group btn-group-toggle" data-toggle="buttons">
                    <label class="btn btn-outline-primary active">
                      <input type="radio" name="delivery_date" value="today" autocomplete="off" checked> Today<br>
                      01 August
                    </label>
                    <label class="btn btn-outline-primary">
                      <input type="radio" name="delivery_date" value="tomorrow" autocomplete="off"> Tomorrow<br>
                      02 August
                    </label>
                    <label class="btn btn-outline-primary">
                      <input type="radio" name="delivery_date" value="pickDate" autocomplete="off"> Pick a date
                    </label>
                  </div>
                </div>
                <div class="form-group" id="datePicker" style="display:none;">
                  <label>Select a delivery date *</label>
                  <input type="date" class="form-control" name="picked_date">
                </div>
                <div class="form-group">
                  <label>Select a delivery time *</label>
                  <div class="btn-group btn-group-toggle" data-toggle="buttons">
                    <label class="btn btn-outline-primary">
                      <input type="radio" name="delivery_time_modal" value="10am-1pm" autocomplete="off"> 10:00am - 1:00pm
                    </label>
                    <label class="btn btn-outline-primary">
                      <input type="radio" name="delivery_time_modal" value="1pm-4pm" autocomplete="off"> 1:00pm - 4:00pm
                    </label>
                    <label class="btn btn-outline-primary">
                      <input type="radio" name="delivery_time_modal" value="4pm-7pm" autocomplete="off"> 4:00pm - 7:00pm
                    </label>
                    <label class="btn btn-outline-primary">
                      <input type="radio" name="delivery_time_modal" value="7pm-10pm" autocomplete="off"> 7:00pm - 10:00pm
                    </label>
                    <label class="btn btn-outline-primary">
                      <input type="radio" name="delivery_time_modal" value="8pm-12am" autocomplete="off"> 8:00pm - 12:00am
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="confirmDeliveryTime">Confirm</button>
        </div>
      </div>
    </div>
  </div>
  
  {% stylesheet %}
    #grad1 {
      background-color: : #9C27B0;
      background-image: linear-gradient(120deg, #FF4081, #81D4FA);
    }
  
    /*form styles*/
    #msform {
      text-align: center;
      position: relative;
      margin-top: 20px;
    }
  
    #msform fieldset .form-card {
      background: white;
      border: 0 none;
      border-radius: 0px;
      box-shadow: 0 2px 2px 2px rgba(0, 0, 0, 0.2);
      padding: 20px 40px 30px 40px;
      box-sizing: border-box;
      width: 94%;
      margin: 0 3% 20px 3%;
  
      /*stacking fieldsets above each other*/
      position: relative;
    }
  
    #msform fieldset {
      background: white;
      border: 0 none;
      border-radius: 0.5rem;
      box-sizing: border-box;
      width: 100%;
      margin: 0;
      padding-bottom: 20px;
  
      /*stacking fieldsets above each other*/
      position: relative;
    }
  
    /*Hide all except first fieldset*/
    #msform fieldset:not(:first-of-type) {
      display: none;
    }
  
    #msform fieldset .form-card {
      text-align: left;
      color: #9E9E9E;
    }
  
    #msform input, #msform textarea {
      padding: 0px 8px 4px 8px;
      border: none;
      border-bottom: 1px solid #ccc;
      border-radius: 0px;
      margin-bottom: 25px;
      margin-top: 2px;
      width: 100%;
      box-sizing: border-box;
      font-family: montserrat;
      color: #2C3E50;
      font-size: 16px;
      letter-spacing: 1px;
    }
  
    #msform input:focus, #msform textarea:focus {
      -moz-box-shadow: none !important;
      -webkit-box-shadow: none !important;
      box-shadow: none !important;
      border: none;
      font-weight: bold;
      border-bottom: 2px solid skyblue;
      outline-width: 0;
    }
  
    /*Blue Buttons*/
    #msform .action-button {
      width: 100px;
      background: skyblue;
      font-weight: bold;
      color: white;
      border: 0 none;
      border-radius: 0px;
      cursor: pointer;
      padding: 10px 5px;
      margin: 10px 5px;
    }
  
    #msform .action-button:hover, #msform .action-button:focus {
      box-shadow: 0 0 0 2px white, 0 0 0 3px skyblue;
    }
  
    /*Previous Buttons*/
    #msform .action-button-previous {
      width: 100px;
      background: #616161;
      font-weight: bold;
      color: white;
      border: 0 none;
      border-radius: 0px;
      cursor: pointer;
      padding: 10px 5px;
      margin: 10px 5px;
    }
  
    #msform .action-button-previous:hover, #msform .action-button-previous:focus {
      box-shadow: 0 0 0 2px white, 0 0 0 3px #616161;
    }
  
    /*Dropdown List Exp Date*/
    select.list-dt {
      border: none;
      outline: 0;
      border-bottom: 1px solid #ccc;
      padding: 2px 5px 3px 5px;
      margin: 2px;
    }
  
    select.list-dt:focus {
      border-bottom: 2px solid skyblue;
    }
  
    /*The background card*/
    .card {
      z-index: 0;
      border: none;
      border-radius: 0.5rem;
      position: relative;
    }
  
    /*FieldSet headings*/
    .fs-title {
      font-size: 25px;
      color: #2C3E50;
      margin-bottom: 10px;
      font-weight: bold;
      text-align: left;
    }
  
    /*progressbar*/
    #progressbar {
      margin-bottom: 30px;
      overflow: hidden;
      color: lightgrey;
    }
  
    #progressbar .active {
      color: #000000;
    }
  
    #progressbar li {
      list-style-type: none;
      font-size: 12px;
      width: 50%;
      float: left;
      position: relative;
    }
  
    /*Icons in the ProgressBar*/
    #progressbar #customize:before {
      font-family: FontAwesome;
      content: "1";
    }
  
    #progressbar #personal:before {
      font-family: FontAwesome;
      content: "2";
    }
  
    /*ProgressBar before any progress*/
    #progressbar li:before {
      width: 50px;
      height: 50px;
      line-height: 45px;
      display: block;
      font-size: 18px;
      color: #ffffff;
      background: lightgray;
      border-radius: 50%;
      margin: 0 auto 10px auto;
      padding: 2px;
    }
  
    /*ProgressBar connectors*/
    #progressbar li:after {
      content: '';
      width: 100%;
      height: 2px;
      background: lightgray;
      position: absolute;
      left: 0;
      top: 25px;
      z-index: -1;
    }
  
    /*Color number of the step and the connector before it*/
    #progressbar li.active:before, #progressbar li.active:after {
      background: skyblue;
    }
  
    /*Imaged Radio Buttons*/
    .radio-group {
      position: relative;
      margin-bottom: 25px;
    }
  
    .radio {
      display: inline-block;
      width: 204;
      height: 104;
      border-radius: 0;
      background: lightblue;
      box-shadow: 0 2px 2px 2px rgba(0, 0, 0, 0.2);
      box-sizing: border-box;
      cursor: pointer;
      margin: 8px 2px;
    }
  
    .radio:hover {
      box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.3);
    }
  
    .radio.selected {
      box-shadow: 1px 1px 2px 2px rgba(0, 0, 0, 0.1);
    }
  
    /*Fit image in bootstrap div*/
    .fit-image {
      width: 100%;
      object-fit: cover;
    }
  
    .card-img {
      width: 100%;
      height: auto;
    }
  
    .message-card {
      border: 1px solid #e9ecef;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
    }
  
    .message-card img {
      width: 40px;
      height: auto;
    }
  {% endstylesheet %}
  
  {% javascript %}
  $(document).ready(function() {
    function showProductModal() {
      $('#productModal').modal('show');
    }
  
    function addToCart(variantId) {
      $.ajax({
        type: 'POST',
        url: '/cart/add.js',
        data: {
          id: variantId,
          quantity: 1
        },
        dataType: 'json',
        success: function() {
          console.log('Product added to cart');
          window.location.reload(); // Reload the page to reflect the updated cart
        },
        error: function(error) {
          console.log('Error adding product to cart', error);
        }
      });
    }
  
    function saveDeliveryDetailsAndRedirect() {
      var recipientName = $('input[name="recipient_name"]').val();
      var recipientPhone = $('input[name="recipient_phone"]').val();
      var askAddress = $('input[name="ask_address"]').is(':checked');
      var recipientAddress = $('input[name="recipient_address"]').val();
      var keepIdentitySecret = $('input[name="keep_identity_secret"]').is(':checked');
      var deliveryTime = $('input[name="delivery_time"]:checked').val();
      var pickedDate = $('input[name="picked_date"]').val();
      var deliveryTimeModal = $('input[name="delivery_time_modal"]:checked').val();
  
      if (deliveryTime === "anotherTime") {
        deliveryTime = `${pickedDate} ${deliveryTimeModal}`;
      }
  
      var attributes = {
        'Recipient Name': recipientName,
        'Recipient Phone': recipientPhone,
        'Ask Address': askAddress ? 'Yes' : 'No',
        'Keep Identity Secret': keepIdentitySecret ? 'Yes' : 'No',
        'Delivery Time': deliveryTime
      };
  
      if (!askAddress) {
        attributes['Recipient Address'] = recipientAddress;
      }
  
      $.ajax({
        type: 'POST',
        url: '/cart/update.js',
        data: {
          attributes: attributes
        },
        dataType: 'json',
        success: function() {
          window.location.href = '/checkout';
        },
        error: function(error) {
          console.log('Error saving delivery details', error);
        }
      });
    }
  
    $('.message-card').click(function() {
      showProductModal();
    });
  
    $('#chooseProduct').click(function() {
      var selectedProduct = $('input[name="selectedProduct"]:checked').val();
      if (selectedProduct) {
        // Add the selected product to the cart via AJAX
        addToCart(selectedProduct);
        // Close the modal
        $('#productModal').modal('hide');
      } else {
        alert('Please select a product');
      }
    });
  
    // Add event listener for the "Next Step" button on delivery tab
    $('#deliveryNextStep').click(function() {
      saveDeliveryDetailsAndRedirect();
    });
  
    // Add event listener for the "Next Step" button on customize tab
    $('#customizeNextStep').click(function() {
      current_fs = $(this).closest('fieldset');
      next_fs = current_fs.next();
  
      // Add Class Active
      $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
  
      // Show the next fieldset
      next_fs.show();
      // Hide the current fieldset with style
      current_fs.animate({opacity: 0}, {
        step: function(now) {
          opacity = 1 - now;
          current_fs.css({
            'display': 'none',
            'position': 'relative'
          });
          next_fs.css({'opacity': opacity});
        },
        duration: 600
      });
    });
  
    // Show delivery details when "Continue to Delivery" is clicked
    function showDeliveryDetails() {
      current_fs = $("#msform fieldset:visible");
      next_fs = current_fs.next();
  
      // Add Class Active
      $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
  
      // Show the next fieldset
      next_fs.show();
      // Hide the current fieldset with style
      current_fs.animate({opacity: 0}, {
        step: function(now) {
          opacity = 1 - now;
          current_fs.css({
            'display': 'none',
            'position': 'relative'
          });
          next_fs.css({'opacity': opacity});
        },
        duration: 600
      });
    }
  
    // Add event listener for the "Continue to Delivery" button
    $('.wc-proceed-to-checkout .next').click(function() {
      showDeliveryDetails();
    });
  
    $(document).on('click', 'input[name="previous"]', function() {
      current_fs = $(this).closest('fieldset');
      previous_fs = current_fs.prev();
  
      // Remove Class Active
      $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");
  
      // Show the previous fieldset
      previous_fs.show();
      // Hide the current fieldset with style
      current_fs.animate({opacity: 0}, {
        step: function(now) {
          opacity = 1 - now;
          current_fs.css({
            'display': 'none',
            'position': 'relative'
          });
          previous_fs.css({'opacity': opacity});
        },
        duration: 600
      });
    });
  
    window.onpopstate = function() {
      if (current_fs.index() > 0) {
        $(current_fs).find(".previous").click();
      }
    };
  
    $('#askAddress').change(function() {
      if ($(this).is(':checked')) {
        $('#addressInfo').show();
        $('#recipientAddress').hide();
      } else {
        $('#addressInfo').hide();
        $('#recipientAddress').show();
      }
    });
  
    $('input[name="delivery_date"]').change(function() {
      if ($(this).val() == 'pickDate') {
        $('#datePicker').show();
      } else {
        $('#datePicker').hide();
      }
    });
  
    $('#confirmDeliveryTime').click(function() {
      $('#deliveryModal').modal('hide');
    });
  });
  {% endjavascript %}
  